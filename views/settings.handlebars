
<h1>Settings</h1>

{{#if success}}
    <div class="alert alert-success">
        <div class="success-message">{{success}}</div>
    </div>
{{/if}}

{{#if errors}}
    <div class="alert alert-error">
        {{#each errors}}
            <div class="error-message">{{this.msg}}</div>
        {{/each}}
    </div>
{{/if}}

<div class="settings-container">
    <div class="settings-section notification-settings">
        <h2>Email Notifications</h2>
        <form action="/settings/email" method="POST" class="settings-form">
            <div class="form-group">
                <label for="notificationEmail">Notification Email Address:</label>
                <input 
                    type="email" 
                    id="notificationEmail" 
                    name="notificationEmail" 
                    value="{{user.notification_email}}"
                    placeholder="Enter email for notifications (optional)"
                    class="form-control"
                >
                <small class="form-text">If not specified, notifications will be sent to your login email</small>
            </div>

            <div class="form-group">
                <label class="checkbox-label">
                    <input 
                        type="checkbox" 
                        name="enableEmailNotifications" 
                        {{#if user.enable_email_notifications}}checked{{/if}}
                    >
                    Enable email notifications globally
                </label>
                <small class="form-text">When disabled, no email notifications will be sent for any monitors</small>
            </div>

            <button type="submit" class="btn btn-primary" id="save-notification-settings">Save Notification Settings</button>
        </form>
    </div>

    <div class="settings-section">
        <h2>Email Template Preview</h2>
        <div class="email-preview">
            <h3>Monitor Alert Preview</h3>
            <div class="email-preview-content">
                <p><strong>Subject:</strong> üö® Monitor Alert: [Monitor Name] is DOWN</p>
                <div class="email-body-preview">
                    <p><strong>Monitor:</strong> Example Website</p>
                    <p><strong>URL:</strong> https://example.com</p>
                    <p><strong>Status:</strong> DOWN</p>
                    <p><strong>Response Time:</strong> 5000ms</p>
                    <p><strong>Error:</strong> HTTP 503</p>
                    <p><strong>Timestamp:</strong> 2024-01-15T10:30:00.000Z</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="navigation-actions">
    <a href="/dashboard" class="btn btn-secondary">‚Üê Back to Dashboard</a>
</div>

<style>
.settings-container {
    max-width: 800px;
    margin: 0 auto;
}

.settings-section {
    background: white;
    padding: 2rem;
    margin-bottom: 2rem;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.settings-section h2 {
    margin-top: 0;
    color: #333;
    border-bottom: 2px solid #007bff;
    padding-bottom: 0.5rem;
}

.settings-form .form-group {
    margin-bottom: 1.5rem;
}

.settings-form label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: #333;
}

.checkbox-label {
    display: flex !important;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
}

.checkbox-label input[type="checkbox"] {
    margin: 0;
    width: auto;
}

.form-text {
    color: #666;
    font-size: 0.875rem;
    margin-top: 0.25rem;
    display: block;
}

.email-preview {
    background: #f8f9fa;
    padding: 1rem;
    border-radius: 6px;
    border: 1px solid #dee2e6;
}

.email-preview h3 {
    margin-top: 0;
    color: #495057;
}

.email-preview-content {
    background: white;
    padding: 1rem;
    border-radius: 4px;
    border: 1px solid #ced4da;
}

.email-body-preview {
    margin-top: 1rem;
    padding: 1rem;
    background: #f8f9fa;
    border-left: 4px solid #007bff;
}

.navigation-actions {
    text-align: center;
    margin-top: 2rem;
}

.alert {
    padding: 1rem;
    margin-bottom: 1rem;
    border-radius: 6px;
}

.alert-success {
    background-color: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.alert-error {
    background-color: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

.alert ul {
    margin: 0;
    padding-left: 1.5rem;
}
</style> 